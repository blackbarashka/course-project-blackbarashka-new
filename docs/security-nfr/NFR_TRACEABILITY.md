# Трассируемость Security NFR ↔ User Stories

## Матрица связей для Reading List API

| ID | User Story | Связанные NFR | Приоритет | Релиз | Комментарий |
|----|------------|----------------|-----------|--------|-------------|
| US-001 | **Как пользователь, я хочу регистрироваться и аутентифицироваться в системе**, чтобы получить доступ к моему списку книг | NFR-001, NFR-002, NFR-005, NFR-009 | High | v1.0 | Критично для безопасности доступа |
| US-002 | **Как пользователь, я хочу добавлять новые книги в мой список**, чтобы отслеживать что планирую прочитать | NFR-003, NFR-005, NFR-006, NFR-009 | High | v1.0 | Основная функциональность приложения |
| US-003 | **Как пользователь, я хочу просматривать мой список книг**, чтобы видеть что планирую прочитать | NFR-004, NFR-005, NFR-009 | Medium | v1.0 | Чтение данных должно быть быстрым и безопасным |
| US-004 | **Как пользователь, я хочу изменять статус книги** (к прочтению/в процессе/прочитано), чтобы отслеживать прогресс | NFR-005, NFR-006, NFR-009 | Medium | v1.1 | Обновление данных требует аудита |
| US-005 | **Как пользователь, я хочу удалять книги из списка**, чтобы убирать неактуальные | NFR-005, NFR-006, NFR-009 | Medium | v1.1 | Удаление данных должно логироваться |
| US-006 | **Как пользователь, я хочу искать книги по названию или автору**, чтобы быстро находить нужные | NFR-004, NFR-005 | Low | v1.2 | Дополнительная функция с защитой от злоупотреблений |

## Детализация связей NFR ↔ User Stories

### US-001: Аутентификация пользователей
- **NFR-001**: Защита от brute-force атак при логине
- **NFR-002**: Унифицированные ответы без раскрытия причин ошибок
- **NFR-005**: Безопасные сообщения об ошибках аутентификации
- **NFR-009**: Аудит попыток входа (успешных/неуспешных)

### US-002: Добавление книг
- **NFR-003**: Rate limiting для защиты от спама
- **NFR-005**: Унифицированные ошибки валидации
- **NFR-006**: Маскирование данных в логах создания
- **NFR-009**: Аудит операций создания книг

### US-003: Просмотр книг
- **NFR-004**: Защита от DDoS атак на чтение
- **NFR-005**: Безопасные ошибки при отсутствии данных
- **NFR-009**: Логирование доступа к данным

### US-004 & US-005: Изменение и удаление книг
- **NFR-005**: Унифицированные ошибки операций
- **NFR-006**: Защита персональных данных в логах
- **NFR-009**: Полный аудит изменений и удалений

### US-006: Поиск книг
- **NFR-004**: Защита от злоупотребления поиском
- **NFR-005**: Безопасная обработка поисковых запросов
